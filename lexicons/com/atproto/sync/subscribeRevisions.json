{
  "lexicon": 1,
  "id": "com.atproto.sync.subscribeRevisions",
  "defs": {
    "main": {
      "type": "subscription",
      "description": "Stream of repo revisions and identity hints for all hosted repos.",
      "parameters": {
        "type": "params",
        "properties": {
          "cursor": {
            "type": "string",
            "description": "The last seen seq to continue the subscription."
          }
        }
      },
      "message": {
        "schema": {
          "type": "union",
          "refs": ["#commit", "#identity"]
        }
      },
      "errors": []
    },
    "commit": {
      "type": "object",
      "description": "Indicates an updated repository revision.",
      "required": ["did", "rev", "seq"],
      "properties": {
        "did": {
          "type": "string",
          "format": "did",
          "description": "The did of the relevant repository."
        },
        "rev": {
          "type": "string",
          "description": "The revision of the relevant repository."
        },
        "seq": {
          "type": "string",
          "description": "The sequence tag of this message."
        }
      }
    },
    "identity": {
      "type": "object",
      "description": "Hints at an identity update for the repository.",
      "required": ["did", "rev", "seq"],
      "properties": {
        "did": {
          "type": "string",
          "format": "did",
          "description": "The did of the relevant repository."
        },
        "rev": {
          "type": "string",
          "description": "The revision of the relevant repository."
        },
        "seq": {
          "type": "string",
          "description": "The sequence tag of this message."
        }
      }
    }
  }
}
